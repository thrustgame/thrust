{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/Thrust.js","src/engine/Corridor.js","src/engine/Player.js","src/engine/PlayerController.js","src/engine/Room.js","src/engine/Track.js","src/engine/Wall.js","src/engine/World.js","src/main.js","src/tool/AudioPlayer.js","src/tool/Canvas.js","src/tool/Clock.js","src/tool/Countdown.js","src/view/Animation/Animation.js","src/view/Animation/Frame.js","src/view/Avatar.js","src/view/BottomCamera.js","src/view/Camera.js","src/view/Map.js","src/view/Minimap.js","src/view/ReadyCheck.js","src/view/Renderer.js","src/view/Title.js","src/view/TopCamera.js"],"names":[],"mappings":"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","file":"thrust.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Clock from './tool/Clock.js';\nimport World from './engine/World.js';\nimport Player from './engine/Player.js';\nimport Room from './engine/Room.js';\nimport Renderer from './view/Renderer.js';\nimport Title from './view/Title.js';\n\nclass Thrust {\n    /**\n     * Constructor\n     */\n    constructor() {\n        // Bind\n        this.onFrame = this.onFrame.bind(this);\n        this.onEnd = this.onEnd.bind(this);\n\n        const height = window.innerHeight;\n\n        // Porperties\n        this.state = 'title';\n        this.frame = null;\n        this.clock = new Clock();\n        this.players = [\n            new Player(65, { start: 0, end: height / 2}),\n            new Player(76, { start: height / 2, end: height})\n        ];\n        this.world = new World(this, this.players, this.onEnd);\n        this.renderer = new Renderer(this.world);\n        this.title = new Title(this);\n        this.setPlayersPosition();\n\n        this.onFrame();\n    }\n\n    reset() {\n        this.players[0].reset();\n        this.players[1].reset();\n        this.world.reset();\n        this.renderer.reset();\n        this.setPlayersPosition();\n    }\n\n    start() {\n        this.players[0].ready = true;\n        this.players[1].ready = true;\n        this.state = 'playing';\n        this.clock.start();\n        this.onFrame();\n    }\n\n    pause() {\n        this.state = 'paused';\n        this.clock.stop();\n    }\n\n    gameover() {\n        this.state = 'gameover';\n        this.clock.stop();\n    }\n\n    setPlayersPosition() {\n        const x = this.renderer.cameras[1].centerX;\n        const wall = this.world.rooms.rooms[0].size * Room.wallSize;\n        const margin = Math.ceil(x / this.renderer.scale + wall);\n        this.world.players[0].position = margin;\n        this.world.players[1].position = margin;\n    }\n\n    /**\n     * On frame\n     */\n    onFrame() {\n        this.frame = requestAnimationFrame(this.onFrame);\n\n        try {\n            if (this.state == 'playing') {\n                this.world.update(this.clock.getDelta());\n            }\n\n            this.renderer.draw();\n        } catch(e) {\n            this.onEnd();\n            throw e;\n        }\n    }\n\n    onEnd() {\n        this.pause();\n        this.frame = cancelAnimationFrame(this.frame);\n        this.state = 'gameover';\n        this.title.setState(this.state);\n        this.title.setVictoryMessages(this.players, this.world.rooms.distance);\n    }\n}\n\nexport default Thrust;\n","import Room from './Room.js';\nimport Wall from './Wall.js';\n\nclass Corridor {\n\n    constructor(length = 80) {\n        this.rooms = [];\n        this.distance = 0;\n\n        this.addRoom(Room.size * 1.3);\n        for (var i = 0; i < length; i++) {\n            this.addRoom();\n        }\n        this.addRoom(Room.size * 1.3);\n    }\n\n    addRoom(forceSize = 0) {\n        const length = this.rooms.length;\n        const start = length ? this.rooms[length - 1].end : 0;\n        const size = Math.round(forceSize ? forceSize : Room.getRandomSize());\n\n        this.rooms.push(new Room(length, start, size));\n        this.distance += size;\n    }\n\n    getWalls() {\n        const length = this.rooms.length;\n        const walls = new Array(length-1);\n\n        for (let i = walls.length - 1; i >= 0; i--) {\n            let room = this.rooms[i];\n            walls[i] = new Wall(room.end);\n        }\n\n        return walls;\n    }\n\n    getInverseWalls() {\n        const length = this.rooms.length;\n        const walls = new Array(length-1);\n\n        for (let i = walls.length - 1; i >= 0; i--) {\n            let room = this.rooms[length-1 - i];\n            walls[i] = new Wall(this.distance - room.start);\n        }\n\n        return walls;\n    }\n}\n\nexport default Corridor;\n","import PlayerController from './PlayerController';\nimport Room from './Room.js';\n\nclass Player {\n\n    static speed = 300;\n    static speedStep = Player.speed / 5;\n    static maxSpeed = Player.speed * 4;\n\n    static thrustDuration = 350;\n\n    constructor(key, zone) {\n        this.thrust = this.thrust.bind(this);\n        this.endThrust = this.endThrust.bind(this);\n\n        this.position = 0;\n        this.speed = Player.speed;\n        this.thrusting = false;\n        this.ready = false;\n        this.thrustTimeout = null;\n        this.wallEventListener = null;\n        this.controller = new PlayerController(key, zone);\n\n        this.controller.addActionListener(this.thrust);\n    }\n\n    reset() {\n        clearTimeout(this.thrustTimeout);\n        this.position = 0;\n        this.speed = Player.speed;\n        this.thrusting = false;\n        this.ready = false;\n    }\n\n    thrust() {\n        if (this.ready) {\n            clearTimeout(this.thrustTimeout);\n            const time = Player.thrustDuration / this.getSpeedRatio();\n            this.thrusting = true;\n            this.ready = false;\n            this.thrustTimeout = setTimeout(this.endThrust, time);\n        }\n    }\n\n    endThrust() {\n        this.thrusting = false;\n        this.ready = true;\n    }\n\n    increaseSpeed() {\n        this.speed = Math.min(this.speed + Player.speedStep, Player.maxSpeed);\n        this.ready = true;\n    }\n\n    resetSpeed() {\n        this.speed = Math.max(this.speed / 2, Player.speed);\n\n        if (this.wallEventListener) {\n            this.wallEventListener();\n        }\n    }\n\n    update(delta) {\n        this.position = Math.round(this.position + this.speed * delta);\n\n        return this.position;\n    }\n\n    setWallEventListener(callback) {\n        this.wallEventListener = callback;\n    }\n\n    getSpeedRatio() {\n        return this.speed / Player.speed;\n    }\n}\n\nexport default Player;\n","import Player from './Player.js';\n\nclass PlayerController {\n\n    constructor(key, zone) {\n        this.key = key;\n        this.zone = zone;\n        this.listeners = [];\n\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.onTouch = this.onTouch.bind(this);\n        this.onAction = this.onAction.bind(this);\n\n        window.addEventListener('keydown', this.onKeyDown, false);\n        window.addEventListener('touchstart', this.onTouch, false);\n    }\n\n    /**\n     * On key down\n     *\n     * @param {Event} event\n     */\n    onKeyDown(event) {\n        if (event.keyCode == this.key) {\n            this.onAction();\n        }\n    }\n\n    /**\n     * On touch\n     *\n     * @param {Event} event\n     */\n    onTouch(event) {\n        event.preventDefault();\n\n        for (let i = event.changedTouches.length - 1; i >= 0; i--) {\n            let touch = event.changedTouches[i].clientY;\n\n            if (touch >= this.zone.start && touch <= this.zone.end) {\n                return this.onAction();\n            }\n        }\n    }\n\n    /**\n     * On action\n     */\n    onAction() {\n        const length = this.listeners.length;\n\n        for (var i = 0; i < length; i++) {\n            this.listeners[i]();\n        }\n    }\n\n    /**\n     * Add action listener\n     *\n     * @param {Function} callback\n     */\n    addActionListener(callback) {\n        if (this.listeners.indexOf(callback) < 0) {\n            this.listeners.push(callback);\n        }\n    }\n\n    /**\n     * Remove action listener\n     *\n     * @param {Function} callback\n     */\n    removeActionListener(callback) {\n        const index = this.listeners.indexOf(callback);\n\n        if (index >= 0) {\n            this.listeners.splice(index, 1);\n        }\n    }\n}\n\nexport default PlayerController;\n","class Room {\n\n    static colors = [\n        ['#D64F9E', '#9C4377'],\n        ['#5BD3F0', '#50A2B6'],\n        ['#5B52B8', '#45407E'],\n    ];\n\n    static size = 400;\n\n    static wallSize = 0.05;\n\n    constructor(id, start, size) {\n        const colors = Room.colors[id % Room.colors.length];\n\n        this.id = id;\n        this.start = start;\n        this.size = size;\n        this.end = start + size;\n        this.wall = this.end - (this.size * Room.wallSize);\n        this.color = colors[0];\n        this.wallColor = colors[1];\n        this.view = null;\n        this.mirror = null;\n    }\n\n    match(start, end) {\n        return this.start < end && this.end > start;\n    }\n\n    static getRandomSize() {\n        return Room.size * (1 + (Math.random() - 0.5) / 2);\n    }\n}\n\nexport default Room;\n","class Track {\n    constructor(walls) {\n        this.walls = walls;\n        this.index = 0;\n    }\n\n    /**\n     * Get wall\n     *\n     * @param {Number} position\n     *\n     * @return {Wall|null}\n     */\n    getWall(position) {\n        if (!this.walls.length) {\n            return null;\n        }\n\n        const wall = this.walls[0];\n\n        if (wall.match(position)) {\n            return this.walls.splice(0, 1);\n        }\n\n        return null;\n    }\n}\n\nexport default Track;\n","class Wall {\n    constructor(position) {\n        this.position = position;\n    }\n\n    match(position) {\n        return this.position <= position;\n    }\n}\n\nexport default Wall;\n","import Corridor from './Corridor.js';\nimport Track from './Track.js';\n\n/**\n * World simulation\n */\nclass World {\n    /**\n     * Constructor\n     *\n     * @param {Number} distance\n     * @param {Array} players\n     * @param {Function} onEnd\n     */\n    constructor(thrust, players, onEnd) {\n        this.thrust = thrust;\n        this.players = players;\n        this.onEnd = onEnd;\n\n        this.reset();\n    }\n\n    reset() {\n        delete this.rooms;\n        delete this.players[0].track;\n        delete this.players[1].track;\n\n        this.rooms = new Corridor();\n        this.players[0].track = new Track(this.rooms.getInverseWalls());\n        this.players[1].track = new Track(this.rooms.getWalls());\n    }\n\n    getDistance() {\n        return this.rooms.distance;\n    }\n\n    /**\n     * Update\n     *\n     * @param {Number} delta\n     */\n    update(delta) {\n        this.updatePlayer(this.players[0], delta);\n        this.updatePlayer(this.players[1], delta);\n\n        if (this.meet()) {\n            this.players[1].position = this.getDistance() - this.players[0].position;\n            this.onEnd();\n        }\n    }\n\n    updatePlayer(player, delta) {\n        const position = player.update(delta);\n        const wall = player.track.getWall(position);\n\n        if (wall) {\n            if (player.thrusting) {\n                player.increaseSpeed();\n            } else {\n                player.resetSpeed();\n            }\n        }\n\n        return position;\n    }\n\n    meet(limit = 0) {\n        return this.getDifference() <= limit;\n    }\n\n    getDifference() {\n        return this.getDistance() - (this.players[0].position + this.players[1].position);\n    }\n}\n\nexport default World;\n","import Thrust from './Thrust.js';\n\nnew Thrust();\n","class AudioPlayer {\n    constructor() {\n        window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n        this.enableMusic = true;\n\n        this.ostBuffer = null;\n        this.audioSource = null;\n\n        this.audioContext = new AudioContext();\n        this.audioPlaying = false;\n\n        this.load = this.load.bind(this);\n        this.play = this.play.bind(this);\n\n        if (this.enableMusic) {\n            this.load(this.play);\n        }\n    }\n\n    load(done) {\n        let request = new XMLHttpRequest();\n        request.open('GET', 'ost/title.ogg');\n        request.responseType = 'arraybuffer';\n\n        request.onload = function() {\n            this.audioContext.decodeAudioData(request.response, function(buffer) {\n                this.ostBuffer = buffer;\n                done();\n            }.bind(this));\n        }.bind(this);\n\n        request.send();\n    }\n\n    play() {\n        this.audioSource = this.audioContext.createBufferSource();\n        this.audioSource.buffer = this.ostBuffer;\n        this.audioSource.connect(this.audioContext.destination);\n        this.audioSource.start(0);\n\n        this.audioPlaying = true;\n    }\n\n    toggle() {\n        if (this.audioPlaying) {\n            this.audioSource.disconnect();\n        } else {\n            this.audioSource.connect(this.audioContext.destination);\n        }\n\n        this.audioPlaying = !this.audioPlaying;\n    }\n}\n\nexport default AudioPlayer;\n","/**\n * Canvas\n *\n * @param {Number} width\n * @param {Number} height\n * @param {Element} element\n */\nclass Canvas {\n    constructor(width, height, element = null) {\n        this.element = element ? element : document.createElement('canvas');\n        this.context = this.element.getContext('2d');\n        this.element.width = width;\n        this.element.height = height;\n        this.context.imageSmoothingEnabled = false;\n    }\n\n    setFill(color) {\n        this.context.fillStyle = color;\n    }\n\n    setAlpha(alpha) {\n        this.context.globalAlpha = alpha;\n    }\n\n    clear() {\n        this.context.clearRect(0, 0, this.element.width, this.element.height);\n    }\n\n    color(color) {\n        this.context.fillStyle = color;\n        this.context.fillRect(0, 0, this.element.width, this.element.height);\n    }\n\n    drawImage(image, x, y, width, height) {\n        this.context.drawImage(image, x, y, width, height);\n    }\n\n    drawImageTo(image, x, y) {\n        this.context.drawImage(image, x, y);\n    }\n\n    drawCircle(x, y, radius) {\n        this.context.beginPath();\n        this.context.arc(x, y, radius, 0, Math.PI * 2, false);\n        this.context.fill();\n    }\n\n    drawRect(x, y, width, height) {\n        this.context.fillRect(x, y, width, height);\n    }\n\n    reverse() {\n        this.context.save();\n        this.context.translate(this.element.width, 0);\n        this.context.scale(-1, 1);\n    };\n\n    toImage() {\n        const image = new Image();\n        image.src = this.toString();\n\n        return image;\n    }\n\n    /**\n     * To string\n     *\n     * @return {String}\n     */\n    toString() {\n        return this.element.toDataURL();\n    }\n\n    toImage() {\n        const image = new Image();\n\n        image.src = this.toString();\n\n        return image;\n    }\n\n    /**\n     * Debug canvas content\n     *\n     * @param {Boolean} image\n     */\n    debug(image = false) {\n        if (image) {\n            document.body.appendChild(this.toImage());\n        } else {\n            console.info(this.toString());\n        }\n    }\n}\n\nexport default Canvas;\n","/**\n * Three.js clock\n *\n * https://github.com/mrdoob/three.js/blob/6400f2c9b6ee58e01c005a66f00c7cd1113752aa/src/core/Clock.js\n *\n * @author alteredq / http://alteredqualia.com/\n */\nclass Clock {\n\n    constructor(autoStart) {\n        this.autoStart = autoStart || true;\n        this.startTime = 0;\n        this.oldTime = 0;\n        this.elapsedTime = 0;\n        this.running = false;\n    }\n\n    start() {\n        this.startTime = Date.now();\n        this.oldTime = this.startTime;\n        this.running = true;\n    }\n\n    stop() {\n        this.getElapsedTime();\n        this.running = false;\n    }\n\n    getElapsedTime() {\n        this.elapsedTime += this.getDelta();\n\n        return this.elapsedTime;\n    }\n\n\n    getDelta() {\n        let diff = 0;\n\n        if (this.autoStart && ! this.running) {\n            this.start();\n        }\n\n        if (this.running) {\n            const newTime = Date.now();\n            diff = 0.001 * ( newTime - this.oldTime );\n            this.oldTime = newTime;\n            this.elapsedTime += diff;\n        }\n\n        return diff;\n    }\n}\n\nexport default Clock;\n","class Countdown {\n    static sequence = ['ready?', 'set', 'go!'];\n\n    constructor(interval, callback) {\n        this.start = this.start.bind(this);\n        this.update = this.update.bind(this);\n        this.end = this.end.bind(this);\n\n        this.timer;\n        this.sequence;\n        this.interval = interval;\n        this.callback = callback;\n        this.containers = [\n            document.getElementById('player1-countdown'),\n            document.getElementById('player2-countdown'),\n        ];\n    }\n\n    start() {\n        this.sequence = Countdown.sequence.slice(0);\n        this.timer = setInterval(this.update, this.interval);\n        setTimeout(this.end, this.interval * this.sequence.length);\n        this.update();\n    }\n\n    update() {\n        if (this.sequence.length >= 0) {\n            let current = this.sequence.shift();\n            this.containers[0].innerText = current;\n            this.containers[1].innerText = current;\n        }\n    }\n\n    end() {\n        clearInterval(this.timer);\n        this.callback();\n    }\n}\n\nexport default Countdown;\n","import Clock from '../../tool/Clock.js';\n\nclass Animation {\n    constructor(frames, timeline) {\n        this.clock = new Clock();\n        this.frames = frames;\n\n        this.checkIntegrity(frames);\n    }\n\n    checkIntegrity(frames) {\n        let lastTo = 0;\n\n        for (i = 0; i <= frames.length; i++) {\n            if (frames[i].from !== lastTo) {\n                throw new Error('frames integrity broken');\n            }\n\n            lastTo = frames[i].to;\n        }\n\n    }\n\n    getCurrentFrame(time) {\n        for (i = 0; i <= this.frames.length; i++) {\n            if (frames[i].matches(time)) {\n                return frames[i];\n            }\n        }\n\n        throw new Error('could not find a frame for time ' + time);\n    }\n}\n","class Frame {\n    constructor(from, to, sprite) {\n        this.from = from;\n        this.to = to;\n        this.sprite = sprite;\n    }\n\n    matches(time) {\n        return this.from <= time && this.to >= time;\n    }\n}\n","import Canvas from '../tool/Canvas.js';\nimport Animation from './Animation/Animation.js';\nimport Frame from './Animation/Frame.js';\nimport Player from '../engine/Player.js';\n\nclass Avatar {\n\n    static radius = 360;\n\n    static shakeTime = 300;\n\n    constructor(player, direction) {\n        this.player = player;\n        this.idle = Avatar.createLozange('#FFFD1B', '#BCBB14', 1, direction, 0.5, 0.75, 0.25);\n        this.idleShadow = Avatar.createLozange('#000000', '#000000', 0.1, direction, 0.5, 0.75, 0.25);\n        this.thrust = Avatar.createLozange('#F5DF0E', '#AB9B0A', 1, direction, 0.25, 1, 0.25);\n        this.thrustShadow = Avatar.createLozange('#000000', '#000000', 0.1, direction, 0.25, 1, 0.25);\n        this.shake = 0;\n        this.shakeTimout = null;\n\n        this.startShake = this.startShake.bind(this);\n        this.endShake = this.endShake.bind(this);\n\n        this.player.setWallEventListener(this.startShake);\n    }\n\n    static createFrames(color, colorDark, direction) {\n        const size = Avatar.radius * 2;\n        const canvas = new Canvas(size, size);\n        const context = canvas.context();\n\n        let frames = [\n        ];\n    }\n\n    static createLozange(color, colorDark, alpha, direction, height, body, head) {\n        const canvasWidth = 2;\n        const canvasHeight = 2;\n\n        const size = Avatar.radius * 2;\n        const canvas = new Canvas(size * canvasWidth, size * canvasHeight);\n        const context = canvas.context;\n\n        const center = { x: canvasWidth / 2, y: canvasHeight / 2 };\n\n        const top = { x: center.x, y: center.y - (height / 2) };\n        const right = { x: center.x + head, y: center.y }\n        const bottom = { x: center.x, y: top.y + height };\n        const left = { x: center.x - body, y: center.y };\n\n        if (direction) {\n            canvas.reverse();\n        }\n\n        context.scale(size, size);\n        canvas.setAlpha(alpha);\n\n        canvas.setFill(color);\n        context.beginPath();\n        context.moveTo(left.x, left.y);\n        context.lineTo(top.x, top.y);\n        context.lineTo(right.x, right.y);\n        context.fill();\n\n        canvas.setFill(colorDark);\n        context.beginPath();\n        context.moveTo(left.x, left.y);\n        context.lineTo(bottom.x, bottom.y);\n        context.lineTo(right.x, right.y);\n        context.fill();\n\n        if (direction) {\n            canvas.reverse();\n        }\n\n        return canvas;\n    }\n\n    startShake() {\n        this.shake = Date.now();\n        this.shakeTimout = setTimeout(this.endShake, Avatar.shakeTime);\n    }\n\n    endShake() {\n        this.shake = false;\n        clearTimeout(this.shakeTimout);\n    }\n\n    getShake() {\n        if (!this.shake) {\n            return 0;\n        }\n\n        const time = (Date.now() - this.shake) / Avatar.shakeTime * 4 * Math.PI;\n\n        return Math.cos(time) * Avatar.radius / 25;\n    }\n\n    draw() {\n        return this.player.thrusting ? this.thrust.element : this.idle.element;\n    }\n\n    drawShadow() {\n        return this.player.thrusting ? this.thrustShadow.element : this.idleShadow.element;\n    }\n\n    getSize() {\n        const ratio = 1 + (this.player.getSpeedRatio() - 1) * 0.5;\n\n        return Avatar.radius / devicePixelRatio * ratio;\n    }\n\n    getDropShadow() {\n        return Avatar.radius * 0.1;\n    }\n}\n\nexport default Avatar;\n","import Camera from './Camera.js';\n\nclass BottomCamera extends Camera {\n\n    constructor(canvas, map, player, scale, y) {\n        super(canvas, map, player, scale, y);\n\n        this.centerX = canvas.element.width / 4;\n        this.centerY = canvas.element.height * 3 / 4;\n\n        const margin = this.centerX / this.scale;\n\n        this.marginLeft = - Math.floor(margin);\n        this.marginRight = Math.floor(margin * 3);\n    }\n\n    translate(x) {\n        return this.centerX + (x - this.player.position) * this.scale;\n    }\n\n    getViewPort() {\n        const margin = this.centerX / this.scale;\n\n        return {\n            start: this.player.position + this.marginLeft,\n            end: this.player.position + this.marginRight,\n        };\n    }\n}\n\nexport default BottomCamera;\n","import Avatar from './Avatar.js';\n\nclass Camera {\n    constructor(canvas, map, player, scale, y) {\n        this.y = Math.ceil(y);\n        this.scale = scale;\n        this.map = map;\n        this.canvas = canvas;\n        this.player = player;\n        this.avatar = new Avatar(player, y === 0);\n        this.halfHeight = Math.round(this.canvas.element.height / 2);\n    }\n\n    draw(alterEgo = null, difference = 0) {\n        const size = Math.round(this.avatar.getSize());\n        const x = Math.round(this.centerX - size / 2);\n        const y = Math.round(this.centerY - size / 2);\n        const sun = this.getSunDirection();\n        const shadow = Math.round(sun * this.avatar.getDropShadow());\n        const shake = Math.round(this.avatar.getShake());\n        const { start, end } = this.getViewPort();\n        let aesize, aex, aey, aeshadow;\n\n        if (alterEgo) {\n            aesize = Math.round(alterEgo.getSize());\n            aex = Math.round(this.getAlterEgoPosition(x, difference));\n            aey = Math.round(this.centerY - aesize / 2);\n            aeshadow = Math.round(sun * alterEgo.getDropShadow());\n        }\n\n        for (let  i = this.map.corridor.rooms.length - 1; i >= 0; i--) {\n            let room = this.map.corridor.rooms[i];\n            if (room.match(start, end)) {\n                this.drawRoom(room);\n            }\n        }\n\n        this.canvas.drawImage(this.avatar.drawShadow(), x + shake, y + shadow, size, size);\n\n        if (alterEgo) {\n            this.canvas.drawImage(alterEgo.drawShadow(), aex + shake, aey + aeshadow, aesize, aesize);\n        }\n\n        this.canvas.drawImage(this.avatar.draw(), x + shake, y, size, size);\n\n        if (alterEgo) {\n            this.canvas.drawImage(alterEgo.draw(), aex + shake, aey, aesize, aesize);\n        }\n    }\n\n    getAlterEgoPosition(x, difference) {\n        return x + difference;\n    }\n\n    drawRoom(room) {\n        if (!room.scaledSize) {\n            room.scaledSize = Math.ceil(room.size * this.scale);\n        }\n\n        this.canvas.drawImage(\n            this.getView(room),\n            Math.round(this.translate(room.start)),\n            this.y,\n            room.scaledSize,\n            this.halfHeight\n        );\n    }\n\n    getView(room) {\n        return room.view;\n    }\n\n    getSunDirection() {\n        return 1;\n    }\n}\n\nexport default Camera;\n","import Canvas from '../tool/Canvas.js';\nimport Room from '../engine/Room.js';\n\nclass Map {\n\n    static cache = {};\n\n    constructor(corridor, distance, scale, height) {\n        this.corridor = corridor;\n        this.scale = scale;\n        this.width = Math.round(distance * scale);\n\n        for (var i = this.corridor.rooms.length - 1; i >= 0; i--) {\n            this.drawRoom(this.corridor.rooms[i]);\n        }\n    }\n\n    drawRoom(room) {\n        const { color, wallColor, size } = room;\n        const id = `${color}`; //:${size}\n\n        if (typeof(Map.cache[id]) === 'undefined') {\n            Map.cache[id] = this.getColor(size, color, wallColor);\n        }\n\n        const { view, mirror } = Map.cache[id];\n\n        room.view = view;\n        room.mirror = mirror;\n    }\n\n    /**\n     * Draw a room into the map\n     *\n     * @param {Room} room\n     */\n    getColor(size, color, wallColor) {\n        const width = Math.ceil(size * this.scale);\n        const view = new Canvas(width, 1);\n        const mirror = new Canvas(width, 1);\n\n        // Draw the room;\n        view.setFill(color);\n        view.drawRect(0, 0, view.element.width, view.element.height);\n\n        // Draw the wall\n        const wallSize = Math.ceil(size * Room.wallSize * this.scale);\n        view.setFill(wallColor);\n        view.drawRect(0, 0, wallSize, view.element.height);\n\n        // Draw the reverse view for top lane\n        mirror.reverse();\n        mirror.drawImageTo(view.element, 0, 0);\n        mirror.reverse();\n\n        return {\n            view: view.element,\n            mirror: mirror.element,\n        };\n    }\n}\n\nexport default Map;\n","import Canvas from '../tool/Canvas.js';\n\n/**\n * Minimap view\n */\nclass Minimap {\n    static radius = 50;\n\n    /**\n     * Constructor\n     *\n     * @param {Number} distance\n     * @param {Number} height\n     * @param {Number} scale\n     * @param {Number} stage\n     */\n    constructor(distance, width, height, stage) {\n        this.distance = distance;\n        this.height = height;\n        this.halfHeight = Math.round(this.height / 2) - Minimap.radius;\n        this.scale = width / distance;\n        this.canvas = new Canvas(width, Minimap.radius * 2);\n    }\n\n    /**\n     * Draw players on the minimap\n     *\n     * @param {Canvas} canvas\n     * @param {Array} avatars\n     */\n    draw(canvas, avatars) {\n        this.drawPlayer(canvas, avatars[0], 'right');\n        this.drawPlayer(canvas, avatars[1], 'left');\n    }\n\n    /**\n     * Draw a player on the minimap\n     *\n     * @param {Canvas} canvas\n     * @param {Avatar} avatar\n     * @param {String} direction\n     */\n    drawPlayer(canvas, avatar, direction) {\n        const position = avatar.player.position;\n        const ltr = (direction == 'left');\n        const width = Minimap.radius * 2;\n        const x = (ltr ? position : this.distance - position) * this.scale - width / 2;\n        const color = ltr ? 0xFF00000 : 0x00FF00;\n\n        canvas.drawImage(avatar.draw(), Math.round(x), this.halfHeight, width, width);\n    }\n}\n\nexport default Minimap;\n","class ReadyCheck {\n    constructor(onReady, players) {\n        this.onReady = onReady;\n        this.players = players;\n        this.states = [];\n        this.elements = [\n            document.getElementById('player1-ready'),\n            document.getElementById('player2-ready'),\n        ];\n\n        this.onPlayerOneReady = this.onPlayerOneReady.bind(this);\n        this.onPlayerTwoReady = this.onPlayerTwoReady.bind(this);\n        this.reset();\n    }\n\n    reset() {\n        this.states = [false, false];\n        this.elements[0].style.display = 'block';\n        this.elements[1].style.display = 'block';\n        this.players[0].controller.addActionListener(this.onPlayerOneReady);\n        this.players[1].controller.addActionListener(this.onPlayerTwoReady);\n    }\n\n    onPlayerOneReady() {\n        this.setReady(0);\n    }\n\n    onPlayerTwoReady() {\n        this.setReady(1);\n    }\n\n    setReady(index) {\n        this.states[index] = true;\n        this.elements[index].style.display = 'none';\n\n        if (this.states[0] && this.states[1]) {\n            this.players[0].controller.removeActionListener(this.onPlayerOneReady);\n            this.players[1].controller.removeActionListener(this.onPlayerTwoReady);\n            this.onReady();\n        }\n    }\n}\n\nexport default ReadyCheck;\n","import Minimap from './Minimap.js';\nimport TopCamera from './TopCamera.js';\nimport BottomCamera from './BottomCamera.js';\nimport Map from './Map.js';\nimport Player from '../engine/Player.js';\nimport Canvas from '../tool/Canvas.js';\n\nclass Renderer {\n\n    static fov = 60;\n\n    /**\n     * Constructor\n     *\n     * @param {World} world\n     */\n    constructor(world) {\n        const width = window.innerWidth/* * devicePixelRatio*/;\n        const height = window.innerHeight/* * devicePixelRatio*/;\n\n        this.world = world;\n        this.canvas = new Canvas(width, height, document.getElementById('canvas'));\n        this.canvas.element.style.width = `${window.innerWidth}px`;\n        this.canvas.element.style.height = `${window.innerHeigh}px`;\n        this.reset();\n    }\n\n    reset() {\n        const width = this.canvas.element.width;\n        const height = this.canvas.element.height;\n        const halfHeight = Math.ceil(height / 2);\n        const distance = this.world.getDistance();\n\n        delete this.map;\n        delete this.minimap;\n        delete this.cameras;\n\n        this.fov = Math.round(distance / Renderer.fov);\n        this.scale = width / this.fov;\n        this.map = new Map(this.world.rooms, distance, this.scale, halfHeight);\n        this.minimap = new Minimap(distance, width, height);\n        this.cameras = [\n            new TopCamera(this.canvas, this.map, this.world.players[0], this.scale, 0),\n            new BottomCamera(this.canvas, this.map, this.world.players[1], this.scale, halfHeight)\n        ];\n    }\n\n    /**\n     * Draw the whole game\n     */\n    draw() {\n        this.canvas.clear();\n\n        const meet = this.world.meet(this.canvas.element.width / this.scale);\n        const difference = meet ? Math.round(this.world.getDifference() * this.scale) : 0;\n\n        this.cameras[0].draw(meet ? this.cameras[1].avatar : null, difference);\n        this.cameras[1].draw(meet ? this.cameras[0].avatar : null, difference);\n\n        this.minimap.draw(this.canvas, [\n            this.cameras[0].avatar,\n            this.cameras[1].avatar,\n        ]);\n    }\n}\n\nexport default Renderer;\n","import AudioPlayer from '../tool/AudioPlayer.js'\nimport ReadyCheck from '../view/ReadyCheck.js'\nimport Countdown from '../tool/Countdown.js'\n\nclass Title {\n    constructor(thrust) {\n        // Methods bindings\n        this.setVictoryMessages = this.setVictoryMessages.bind(this);\n        this.startGame = this.startGame.bind(this);\n        this.setState = this.setState.bind(this);\n        this.toggleState = this.toggleState.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.startCountdown = this.startCountdown.bind(this);\n        this.offerReset = this.offerReset.bind(this);\n        this.reset = this.reset.bind(this);\n\n        this.thrust = thrust;\n        this.countdown = new Countdown(400, this.startGame);\n        this.readyCheck = new ReadyCheck(this.startCountdown, this.thrust.players);\n        this.audioPlayer = new AudioPlayer();\n        this.overlays = {\n            title: document.getElementById('title'),\n            countdown: document.getElementById('countdown'),\n            pause: document.getElementById('pause'),\n            gameover: document.getElementById('gameover'),\n        };\n\n        this.victoryElements = [\n            document.getElementById('player1-victory'),\n            document.getElementById('player2-victory'),\n        ];\n\n        window.addEventListener('keydown', this.onKeyDown);\n    }\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case 32:\n                this.toggleState();\n                break;\n            case 84:\n                this.audioPlayer.toggle();\n                break;\n        }\n    }\n\n    reset() {\n        window.removeEventListener('keydown', this.reset);\n        window.removeEventListener('touchstart', this.reset);\n        this.readyCheck.reset();\n        this.thrust.reset();\n        this.setState('title');\n    }\n\n    startCountdown() {\n        this.setState('countdown');\n        this.countdown.start();\n    }\n\n    startGame() {\n        this.thrust.start();\n        this.setState(this.thrust.state);\n    }\n\n    setVictoryMessages(players, distance) {\n        const p1percent = Math.floor(players[0].position / distance * 100);\n        const p2percent = 100 - p1percent;\n\n        this.victoryElements[0].innerText = p1percent + '%';\n        this.victoryElements[1].innerText = p2percent + '%';\n    }\n\n    setState(state) {\n        this.overlays.title.style.display = 'none';\n        this.overlays.countdown.style.display = 'none';\n        this.overlays.pause.style.display = 'none';\n        this.overlays.gameover.style.display = 'none';\n\n        switch (state) {\n            case 'title':\n                this.overlays.title.style.display = 'flex';\n                break;\n            case 'countdown':\n                this.overlays.countdown.style.display = 'flex';\n                break;\n            case 'paused':\n                this.overlays.pause.style.display = 'flex';\n                break;\n            case 'gameover':\n                this.overlays.gameover.style.display = 'flex';\n                setTimeout(this.offerReset, 1000);\n                break;\n        }\n    }\n\n    offerReset() {\n        window.addEventListener('keydown', this.reset);\n        window.addEventListener('touchstart', this.reset);\n    }\n\n    toggleState() {\n        switch (this.thrust.state) {\n            case 'paused':\n                this.thrust.start();\n                break;\n            case 'playing':\n                this.thrust.pause();\n                break;\n        }\n\n        this.setState(this.thrust.state);\n    }\n}\n\nexport default Title;\n","import Camera from './Camera.js';\n\nclass TopCamera extends Camera {\n\n    constructor(canvas, map, player, scale, y) {\n        super(canvas, map, player, scale, y);\n\n        const margin = this.canvas.element.width / 4 / this.scale;\n\n        this.centerX = canvas.element.width * 3 / 4;\n        this.centerY = canvas.element.height / 4;\n        this.marginLeft = - Math.floor(3 * margin);\n        this.marginRight = Math.floor(margin);\n    }\n\n    translate(x) {\n        const position = this.map.corridor.distance - this.player.position;\n\n        return this.centerX + (x - position) * this.scale;\n    }\n\n    getViewPort() {\n        const position = this.map.corridor.distance - this.player.position;\n\n        return {\n            start: position + this.marginLeft,\n            end: position + this.marginRight,\n        };\n    }\n\n    getAlterEgoPosition(x, difference) {\n        return x - difference;\n    }\n\n    getView(room) {\n        return room.mirror;\n    }\n\n    getSunDirection() {\n        return -1;\n    }\n}\n\nexport default TopCamera;\n"]}